<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VAE - Virtual Audio Engine: VAE Readme</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VAE - Virtual Audio Engine<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">Small Data Driven Audio Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__home_usr_git_master__v_a_e_g__v_a_e__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">VAE Readme </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Virtual Audio Engine is a fairly WIP 3D software-audio-renderer.</p>
<p >Minimal example to play some sound </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">#include &lt;thread&gt;</div>
<div class="line">#include &quot;vae/vae_pimpl.hpp&quot;    // Pimpl API</div>
<div class="line">#include &quot;./vae_def.hpp&quot;        // generated bank names from json (generate_bank_defines.py)</div>
<div class="line"> </div>
<div class="line">int main() {</div>
<div class="line">    auto e = vae::EnginePimpl::create();</div>
<div class="line">    e-&gt;init();  // Uses default settings and default audio device</div>
<div class="line">    e-&gt;start(); // Starts audio</div>
<div class="line">    auto result = e-&gt;loadBank(&quot;bank1&quot;); // open ./bank1/bank.json</div>
<div class="line">    result = e-&gt;loadBank(&quot;bank2&quot;);      // open ./bank2/bank.json</div>
<div class="line">    // see /dev/bank1/ and /dev/bank2/ for examples</div>
<div class="line"> </div>
<div class="line">    if (result != Result::Success) { return 1; }</div>
<div class="line">    auto emitter = e-&gt;createEmitter();</div>
<div class="line">    auto listener = e-&gt;createListener(); // only needed for spatialized sounds</div>
<div class="line">    e-&gt;fireGlobalEvent(vaeb::Bank1::Music, emitter); // fire named event</div>
<div class="line">    e-&gt;setSpeed(emitter, 0.6); // slow the music</div>
<div class="line"> </div>
<div class="line">    // let it run for a little</div>
<div class="line">    for (int i = 0; i &lt; 2000, i++) {</div>
<div class="line">        if (i % 100 == 0) {</div>
<div class="line">            // Fire event 0 on bank 0, will not be slowed down</div>
<div class="line">            e-&gt;fireEvent(0, 0, emitter);</div>
<div class="line">        }</div>
<div class="line">        e-&gt;update(); // update engine state</div>
<div class="line">        // sleep a little</div>
<div class="line">        std::this_thread::sleep_for(</div>
<div class="line">            std::chrono::duration&lt;double, std::milli&gt;(1.0 / 60.0)</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">    e-&gt;destroy(); // clean up</div>
<div class="line">    return 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p >It aims to be a fairly small and data driven Engine with a focus on performance. Its design is mostly data oriented and tries to avoid inhertance and preallocates almost all memory upfront and while loading banks.</p>
<p >Most of it inside one single compilation unit, so the compiler can go on it's way and inline whatever it wants to. This also means extending it is done directly in source and not via interfaces or other common mechanisms (besides AudioDevice and EffectBase which are interfaces).</p>
<p >The easiest way to get started is to compile a shared library with </p><div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake -DVAE_BUILD_SHARED_LIBS=ON ..</div>
<div class="line">make</div>
</div><!-- fragment --><p> And then use the <a class="el" href="classvae_1_1_engine_pimpl.html" title="Sealed of version of vae::core::Engine.">vae::EnginePimpl</a> class in <a class="el" href="vae__pimpl_8hpp.html">include/vae/vae_pimpl.hpp</a> while linking against the shared libvae.so/dll library.</p>
<p >Alternatively you can add the whole thing as a subproject and static link against it. Using the pimpl api is optional but the better option since it won't pull in the whole thing.</p>
<p ><a href="https://tobiaskozel.github.io/VAE-Docs/">doxygen page</a></p>
<h1><a class="anchor" id="autotoc_md19"></a>
TODOs</h1>
<ul>
<li>Fix click at end of sounds for speex reampled sounds</li>
<li>Streaming</li>
<li>Split up pod data and internal data structures so they can be exposed to the public API as well.</li>
<li>LFE Channel</li>
<li>Emitter emittsion patterns</li>
<li>More generic parameter controls and smoothing</li>
<li>Send Mixer effects</li>
<li>progress virtual voices and kill them so they don't pile up</li>
<li>Event queue for synchronized playback</li>
<li>State to alter parameters/events</li>
<li>Automation</li>
<li>Faster HRTF (currently in time domain and about 80 times slower than a normal voice)</li>
<li>HRTF interoplation needed for fast movements</li>
<li>Some sort of basic authoring tool</li>
<li>Geometry and material system for obstruction and reverb zones</li>
</ul>
<h1><a class="anchor" id="autotoc_md20"></a>
Features</h1>
<ul>
<li>3D SPCAP or HRTF panning (slow implementation)</li>
<li>Event driven sound system</li>
<li>Simple json bank format</li>
<li>upfront .wav and .ogg loading, no streaming</li>
<li>Simple mixer hirachry</li>
<li>Fixed mixrate with high quality resampler for deviceoutput (speex)</li>
<li>High quality resampling when loading audio</li>
<li>Realtime linear resampling otherwise</li>
<li>Per voice variable speed playback and high/lowpass filters</li>
<li>Multiple Listeners, no individual output devices however and not tested at all</li>
<li>Integration for the profiler tracy which can give nice insights on memory consumtion and cpu times</li>
</ul>
<h1><a class="anchor" id="autotoc_md21"></a>
Performance</h1>
<ul>
<li>Figure out why SPCAP voices are faster than Default voices, test mono and stereo.</li>
<li>deduplicate audio rendering code</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Nice to haves</h1>
<ul>
<li>signal generators</li>
<li>Inject audio stream at runtime (e.g. for VoiP)</li>
<li>Voice priority system (got unkillable voice at least)</li>
<li>Seperate Mixing hirarchies for each listener</li>
<li>Seperate Audio device per listener</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Defines</h1>
<h2><a class="anchor" id="autotoc_md24"></a>
VAE_RELEASE</h2>
<ul>
<li>Disables all log levels except error</li>
<li>Strips the name from structs</li>
<li>Disables assertions </li>
</ul>
<h2><a class="anchor" id="autotoc_md25"></a>
VAE_LOG_EVENTS</h2>
<p >Logs all events</p>
<h2><a class="anchor" id="autotoc_md26"></a>
VAE_LOG_VOICES</h2>
<p >Logs voices starting and stopping</p>
<h2><a class="anchor" id="autotoc_md27"></a>
VAE_DLL_EXPORT</h2>
<p >Only relevant for the PIMPL Api, will add __declspec to all funcitons</p>
<h2><a class="anchor" id="autotoc_md28"></a>
VAE_NO_AUDIO_THREAD</h2>
<p >Does remove ability to render audio in a seperate thread if <a class="el" href="structvae_1_1_engine_config.html#a9339df44eb2041c5e519fa5734f1d58a" title="If enabled, all processing and mixing will happen in the audio callback.">vae::EngineConfig::processInBufferSwitch</a> is false the processing function has to be called manually (TODO)</p>
<h2><a class="anchor" id="autotoc_md29"></a>
VAE_NO_AUDIO_DEVICE</h2>
<p >Only makessense with VAE_NO_AUDIO_THREAD to drive the engine from the outside. Will expose <a class="el" href="classvae_1_1core_1_1_engine.html#afecf53f2eaf92d13a933c05c821b3819" title="Main processing function.">vae::core::Engine::process</a> which can be called from a custom callback.</p>
<p >Not pretty and goes against the device abstraction idea</p>
<h2><a class="anchor" id="autotoc_md30"></a>
VAE_NO_EXCEPT</h2>
<p >Tries to disable exceptions in third party libs, should build with -fno-exceptions</p>
<h2><a class="anchor" id="autotoc_md31"></a>
VAE_NO_SIMD</h2>
<p >Disables SIMD</p>
<h2><a class="anchor" id="autotoc_md32"></a>
VAE_NO_STDIO</h2>
<p >Tries to get rid of most stdio, hash map currently still depends on it</p>
<p ><a class="el" href="struct_file.html">File</a> reading and writing need to be provided by defining the functions <a class="el" href="vae__fs_8hpp.html">vae_fs.hpp</a></p>
<p >Also requires VAE_PRINT to be defined</p>
<h2><a class="anchor" id="autotoc_md33"></a>
VAE_PRINT</h2>
<p >Can be defined to redirect logging, same interface as printf </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
